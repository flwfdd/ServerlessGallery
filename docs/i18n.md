# 国际化 (i18n) 使用指南

本项目已集成 Vue i18n 支持中英双语切换。

## 功能特性

- 🌍 支持中文和英文两种语言
- 🔄 实时语言切换，无需刷新页面
- 💾 语言偏好自动保存到 localStorage
- 🌐 自动检测浏览器语言偏好
- 📱 响应式语言切换组件

## 使用方法

### 语言切换

1. 点击页面右上角的语言切换按钮（地球图标）
2. 从下拉菜单中选择所需语言
3. 页面内容将立即切换到选定语言

### 键盘快捷键

- `Alt + L`: 打开/关闭语言选择菜单
- `Esc`: 关闭语言选择菜单

## 技术实现

### 文件结构

```
src/i18n/
├── index.ts          # i18n 配置和工具函数
└── locales/
    ├── zh.json       # 中文翻译
    └── en.json       # 英文翻译
```

### 配置说明

- **默认语言**: 中文 (zh)
- **备用语言**: 中文 (zh)
- **支持语言**: 中文 (zh), 英文 (en)
- **存储方式**: localStorage (`preferred-language`)

### 在组件中使用

```vue
<template>
  <div>
    <!-- 使用 t() 函数进行翻译 -->
    <h1>{{ t('header.title') }}</h1>
    <p>{{ t('header.subtitle') }}</p>
    
    <!-- 带参数的翻译 -->
    <p>{{ t('upload.uploadProgress', { current: 1, total: 5 }) }}</p>
  </div>
</template>

<script setup>
import { useI18n } from 'vue-i18n'

const { t } = useI18n()
</script>
```

### 添加新的翻译

1. 在 `src/i18n/locales/zh.json` 中添加中文翻译
2. 在 `src/i18n/locales/en.json` 中添加对应的英文翻译
3. 在组件中使用 `t('key.path')` 调用

### 翻译键命名规范

- 使用点号分隔的层级结构
- 按功能模块组织 (如: `upload.`, `fileList.`, `common.`)
- 使用驼峰命名法 (如: `uploadProgress`, `fileType`)

## 语言检测逻辑

1. 首先检查 localStorage 中的用户偏好
2. 如果没有偏好设置，检查浏览器语言
3. 如果浏览器语言以 'zh' 开头，使用中文
4. 其他情况默认使用中文

## 组件说明

### LanguageSwitcher 组件

位置: `src/client/components/LanguageSwitcher.vue`

特性:
- 显示当前语言的本地化名称
- 下拉菜单显示所有可用语言
- 支持键盘导航
- 响应式设计，适配深色模式

## 扩展支持

如需添加更多语言支持:

1. 在 `src/i18n/locales/` 目录下创建新的语言文件
2. 在 `src/i18n/index.ts` 中导入新语言文件
3. 更新 `supportedLocales` 数组
4. 添加相应的翻译内容

示例添加法语支持:

```typescript
// src/i18n/index.ts
import fr from './locales/fr.json'

export const supportedLocales = [
  { code: 'zh', name: '中文', nativeName: '中文' },
  { code: 'en', name: 'English', nativeName: 'English' },
  { code: 'fr', name: 'French', nativeName: 'Français' }
]

export const i18n = createI18n({
  // ...
  messages: {
    zh,
    en,
    fr
  }
})
``` 